function formatJson(e,t,a){e=e[0];for(var r={},n=["ATRIUM - AT8","ATRIUM - AT9","ESCARPE - Amphi Ortscheidt","ESCARPE - Amphi 29","PLATANE - A08","PLATANE - A09","PLATANE - A10","PLATANE - A11","PLATANE - A12","PLATANE - A13","PLATANE - B01","PLATANE - B02","PLATANE - B03","PLATANE - B04","PLATANE - B05","M\xe9diath\xe8que Malraux","Shadok","Jardins de l'universit\xe9","Presqu'\xeele Malraux","Salle des colonnes"],d=0;d<days.length;d++)"friday"!=days[d]&&"thursday"!=days[d]&&(r[days[d]]=[]);for(var d=0;d<e.tracks.length;d++)e.tracks[d].name=e.tracks[d].name.split("*")[lang];for(var l=e.rooms.length,d=0;l>d;d++)for(var i=e.rooms[d],s=i.events.length,o=0;s>o;o++){var c,m=i.events[o],u=new Date(m.start_time),v=days[u.getDay()];void 0===r[v][m.track_id]&&(r[v][m.track_id]={track:e.tracks[m.track_id-1],events:[]}),c=r[v][m.track_id].events,m.date=100*u.getUTCHours()+u.getUTCMinutes();var p=m.date+"";m.day=0===lang?v:u.toLocaleDateString("fr-FR",{weekday:"long"}),m.dateStr=p.substring(0,2)+"h"+p.substring(2),m.start=60*u.getUTCHours()+u.getUTCMinutes()-600,m.room=n[d];var h=e.difficulty_levels[m.difficulty_level_id-1];m.difficulty=h?h.title.split("*")[0]:"null",m.difficultyName=h?h.title.split("*")[lang]:"null";var y=e.event_types.find(function(e){return e.id===m.event_type_id?e:void 0});m.length=y.length;var f=y.title.split(" (")[0].split("*");m.type=f[0],m.typeName=f[lang],c.push(m)}var L=Array(10,7,1,8,15,11,19,20,9,14,18,17,13,12,25,16,24,21,2,3,4,5,6,22,23);for(var v in r)if(r.hasOwnProperty(v)){for(var g=Array(),d=0;d<r[v].length;d++)if(r[v][d]){r[v][d].events=r[v][d].events.sort(function(e,t){return e.date>t.date?1:t.date>e.date?-1:0});for(var o=0;o<r[v][d].events.length;o++){var m=r[v][d].events[o];0!=o&&r[v][d].events[o-1].date===m.date&&(r[v][d].events[o-1]["class"]="double-top",m["class"]="double-bottom")}g[L.indexOf(d)]=r[v][d]}t(g,v)}a&&a()}function initSelectorsListeners(e,t){function a(e){for(var t=e.length-1;t>=0;t--)if(!e[t].classList.contains("hide"))return!1;return!0}function r(e){for(var t=e.length-1;t>=0;t--){var r=e[t].getElementsByClassName("event");a(r)?e[t].classList.add("hide"):e[t].classList.remove("hide")}}for(var n=document.querySelectorAll("#selectors ul a"),d="table .event"!=e,l=0;l<n.length;l++)n[l].addEventListener("click",function(a){var n=document.querySelectorAll(e),l=document.querySelectorAll(t),i=document.getElementsByClassName("starred");if(d)var s=document.getElementsByClassName("day-nav");var o=a.target.id.split("-");if("all"==o[1]){for(var c=n.length-1;c>=0;c--)n[c].classList.remove("hide"),d&&document.querySelector("a[href='#"+n[c].id+"']").parentElement.classList.remove("hide");for(var c=l.length-1;c>=0;c--)l[c].classList.remove("hide");for(var c=i.length-1;c>=0;c--)i[c].classList.remove("hide"),d&&s[c].classList.remove("hide")}else{for(var c=i.length-1;c>=0;c--)i[c].classList.add("hide"),d&&s[c].classList.add("hide");for(var c=n.length-1;c>=0;c--){var m=n[c].dataset[o[0]]==o[1];if("type-other"==a.target.id){var u=["debate","chatroom","arpentage litt\xe9raire"];m=u.indexOf(n[c].dataset[o[0]])>-1}m?(n[c].classList.remove("hide"),d&&document.querySelector("a[href='#"+n[c].id+"']").parentElement.classList.remove("hide")):(n[c].classList.add("hide"),d&&document.querySelector("a[href='#"+n[c].id+"']").parentElement.classList.add("hide"))}r(l)}var v=document.querySelector(".overflow");d||(v.scrollLeft=0),v.scrollTop=0})}function buildTable(e,t){var a=document.querySelector("table"),r=domElem("tbody","",{"data-day":t});t!=today&&r.classList.add("hide");for(var n=0;n<e.length;n++)if(e[n]){var d=document.createElement("tr"),l=document.createElement("th");l.setAttribute("scope","row"),l.innerHTML="<p>"+e[n].track.name+"</p>",d.appendChild(l);for(var i=document.createElement("td"),s=0;s<e[n].events.length;s++){var o=0===s?e[n].events[s].start:e[n].events[s].start-(e[n].events[s-1].start+e[n].events[s-1].length);i.appendChild(buildTableArticle(e[n].events[s],o))}d.appendChild(i),r.appendChild(d)}a.appendChild(r)}function setupTable(){initSelectorsListeners("table .event","tbody tr"),initTableListeners()}function buildTableArticle(e,t){var a=domElem("div","event-container");a.style.marginLeft=5*t+"px",a.style.width=5*e.length+"px";var r=domElem("article","event",{"data-type":e.type.toLowerCase(),"data-level":e.difficulty.toLowerCase()});e["class"]&&a.classList.add(e["class"]),a.appendChild(r);var n=domElem("aside","top"),d=domElem("mark");d.innerHTML=e.dateStr;var l=domElem("span");l.innerHTML=e.length+"'",appendChildren(n,[d,l]),r.appendChild(n);var i=domElem("div","content"),s=document.createElement("h3");s.innerHTML=e.title;var o=document.createElement("h4");o.innerHTML=e.subtitle;var c=domElem("p","author");c.innerHTML=e.speaker_names;var m=domElem("div","abstract");m.innerHTML=e.abstract_html,appendChildren(i,[s,o,c,m]),r.appendChild(i);var u=domElem("aside","bottom"),v=domElem("span","room");v.innerHTML=e.room;var p=domElem("span");p.innerHTML=e.typeName;var h=domElem("span","lvl");h.innerHTML=e.difficultyName;var y=[v,p,h];if(e.require_registration){var f=domElem("a");f.innerHTML=["Registration required","Inscription requise"][lang],f.href=e.registration_url,y.push(f)}return appendChildren(u,y),r.appendChild(u),a}function initTableListeners(){function e(e,t){for(;(e=e.parentElement)&&e.nodeName!=t;);return e}for(var t=document.querySelectorAll("#daySelection a"),a=document.getElementsByClassName("starred-day"),r=0;r<t.length;r++)t[r].dataset.toggle===today&&t[r].classList.add("selected"),a[r].dataset.day===today&&a[r].classList.remove("hide"),t[r].addEventListener("click",function(e){var t="SPAN"==e.target.nodeName?e.target.parentElement.dataset.toggle:e.target.dataset.toggle,a=document.querySelector(".overflow");a.scrollTop=0,a.scrollLeft=0,document.querySelector("tbody:not(.hide)").classList.add("hide"),document.querySelector(".starred-day:not(.hide)").classList.add("hide"),document.querySelector("tbody[data-day='"+t+"']").classList.remove("hide"),document.querySelector(".starred-day[data-day='"+t+"']").classList.remove("hide"),document.querySelector(".selected").classList.remove("selected"),e.target.classList.add("selected")});for(var n=document.querySelectorAll("table .event"),r=0;r<n.length;r++)n[r].addEventListener("mousedown",function(t){function a(){r.removeEventListener("mouseup",a),!n&&Date.now()-d>250||(n?(document.getElementById("bg-card").style.display="none",r.classList.remove("card"),r.parentElement.classList.remove("card"),document.querySelector(".overflow").classList.add("dragscroll"),dragscroll.reset()):(document.getElementById("bg-card").style.display="block",r.classList.add("card"),r.parentElement.classList.add("card"),document.querySelector(".overflow").classList.remove("dragscroll"),dragscroll.reset()))}var r="ARTICLE"==t.target.nodeName?t.target:e(t.target,"ARTICLE"),n=r.classList.contains("card"),d=Date.now();r.addEventListener("mouseup",a)});document.getElementById("bg-card").onclick=function(){document.getElementById("bg-card").style.display="none",document.querySelector(".event.card").classList.remove("card"),document.querySelector(".event-container.card").classList.remove("card"),document.querySelector(".overflow").classList.add("dragscroll"),dragscroll.reset()}}function buildList(e,t){e=e.filter(function(e){return void 0!=e});var a=e.map(function(e){return{name:e.track.name,id:t+"-track"+e.track.id,events:e.events}}),r=document.querySelector("[data-day="+t+"]");r.querySelector(".pres nav").appendChild(buildNavList(a));for(var n=document.createDocumentFragment(),d=0;d<a.length;d++)n.appendChild(buildTrackSection(a[d]));r.querySelector(".agenda").appendChild(n)}function setupList(){document.querySelector("section.days").classList.remove("hide");var e=window.location.href;if(e.indexOf("#")>-1){var t=e.substring(e.lastIndexOf("#")+1);document.getElementById(t).scrollIntoView()}else document.getElementById(today).scrollIntoView();initSelectorsListeners(".track .event",".track")}function buildNavList(e){var t=domElement("ul",{"class":"right"}),a=domElement("h4");a.innerHTML="Tracks",t.appendChild(a);for(var r=0;r<e.length;r++){var n=document.createElement("li"),d=domElement("a",{href:"#"+e[r].id});d.innerHTML=e[r].name,n.appendChild(d),t.appendChild(n)}return t}function buildTrackSection(e){var t=domElement("section",{"class":"track",id:e.id}),a=domElement("article",{"class":"pres"});t.appendChild(a);var r=domElement("h4");r.innerHTML=e.name;var n=domElement("nav");appendChildren(a,[r,n]);var d=domElement("ul");n.appendChild(d);var l=domElement("h4");l.innerHTML=["Events","\xc9v\xe9nements"][lang],d.appendChild(l);for(var i=e.events,s=0;s<i.length;s++){i[s].id=e.id+"-"+s;var o=document.createElement("li"),c=domElement("a",{href:"#"+i[s].id});c.innerHTML=i[s].title,o.appendChild(c),d.appendChild(o),t.appendChild(buildListArticle(e.events[s]))}return t}function buildListArticle(e){var t=domElement("article",{"class":"event",id:e.id,"data-type":e.type.toLowerCase(),"data-level":e.difficulty.toLowerCase()}),a=document.createElement("h5");if(a.innerHTML=e.title,t.appendChild(a),e.subtitle&&""!=e.subtitle){var r=document.createElement("h6");r.innerHTML=e.subtitle,t.appendChild(r)}var n=domElement("div",{"class":"content"}),d=domElement("p");d.innerHTML=e.speaker_names;var l=domElement("div",{"class":"abstract"});l.innerHTML=e.abstract_html,appendChildren(n,[d,l]);for(var i=[["Hour","Type","Building","Duration","Difficulty","Day"],["Heure","Type","Batiment","Dur\xe9e","Niveau","Jour"]],s=[e.dateStr.replace("h",":"),e.typeName,e.room,e.length+"'",e.difficultyName,e.day],o=domElement("dl",{"class":"infos"}),c=0;c<s.length;c++){var m=document.createElement("div"),u=document.createElement("dt");if(0==c){var v=document.createElement("time");v.innerHTML=i[lang][c],u.appendChild(v)}else u.innerHTML=i[lang][c];var p=document.createElement("dd");p.innerHTML=s[c],appendChildren(m,[u,p]),o.appendChild(m)}if(e.require_registration){var h=domElem("a");h.innerHTML=["Register here","S'inscrire"][lang],h.href=e.registration_url,o.appendChild(h)}return appendChildren(t,[n,o]),t}var baseUrl="/api/v1/conferences/rmll2018/",days=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],today=days[new Date(Date.now()).getDay()];