function init(){duplicateNodes(),trad.style.overflow="hidden",trad.style.position="fixed",trad.style.top=0,source.style.display="block",0!=window.scrollY&&(trad.scrollTop=window.scrollY),update()}function update(){h=window.innerHeight,w=window.innerWidth,portrait=h>w,changeHeight(portrait?h/1.15:h/1.4),setSourceBlockHeight()}function displayMenu(){function e(){t.style.display="none",portrait&&setTimeout(function(){window.scrollBy(0,-80)},10),t.removeEventListener("click",e)}var t=document.getElementById("menu");"block"===t.style.display?e():(t.style.display="block",rmllMention.style.display="block",t.addEventListener("click",e))}function sliderListener(e){function t(e){changeHeight(e.clientY)}function n(e){t(e),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)}e.preventDefault(),t(e),window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)}function sliderTouchListener(e){function t(e){changeHeight(e.changedTouches[0].clientY)}function n(e){t(e),window.removeEventListener("touchmove",t),window.removeEventListener("touchend",n)}e.preventDefault(),t(e),window.addEventListener("touchmove",t),window.addEventListener("touchend",n)}function adaptScroll(e){var t=e.pageY||document.body.scrollTop||window.scrollY;trad.scrollTop=t;var n=rmllMention.style.display,o=portrait&&768>w&&t>h;!o||"block"!==n&&""!==n?"none"===n&&h>=t&&(rmllMention.style.display="block"):rmllMention.style.display="none"}function readOnlyView(){var e=readOnly.style.backgroundColor;"black"===e||""===e?(readOnly.style.backgroundColor="#8400ff",changeHeight(h)):(readOnly.style.backgroundColor="black",changeHeight(portrait?h/1.15:h/1.4))}function changeHeight(e){e>=h?(slider.style.bottom="-5px",trad.style.height="100%"):e>0?(slider.style.bottom=h-e-5+"px",trad.style.height=e+"px"):(slider.style.bottom=h-5+"px",trad.style.height=0)}function setSourceBlockHeight(){function e(e,t,n){for(var o,i,d=0;o=e[d],i=t[d];d++)n?i.style.height=o.getBoundingClientRect().width+"px":i.style.height=o.getBoundingClientRect().height+"px"}var t=document.getElementsByTagName("HEADER");e(t[1].children,t[0].children,portrait);var n=["P","H2","H3","H4","H5","UL"];n.forEach(function(t){var n=trad.getElementsByTagName(t),o=source.getElementsByTagName(t);e(n,o)})}function duplicateNodes(){var e=document.getElementsByTagName("SECTION")[2].cloneNode(!0);source.appendChild(e)}var trad=document.getElementById("trad"),source=document.getElementById("source"),slider=document.getElementById("slider"),rmllMention=document.getElementById("rmll"),readOnly=document.getElementById("read"),h,w,portrait;window.onload=init,window.addEventListener("resize",update),document.getElementById("button").onclick=displayMenu,slider.addEventListener("mousedown",sliderListener),slider.addEventListener("touchstart",sliderTouchListener),window.addEventListener("scroll",adaptScroll,{passive:!0}),readOnly.addEventListener("click",readOnlyView);